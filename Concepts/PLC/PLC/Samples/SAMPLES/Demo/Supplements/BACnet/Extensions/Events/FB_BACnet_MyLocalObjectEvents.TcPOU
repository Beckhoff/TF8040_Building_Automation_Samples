<?xml version="1.0" encoding="utf-8"?>
<TcPlcObject Version="1.1.0.1" ProductVersion="3.1.4024.13">
  <POU Name="FB_BACnet_MyLocalObjectEvents" Id="{a54e7652-eb23-4ec0-b40b-d55684b16d9a}" SpecialFunc="None">
    <Declaration><![CDATA[FUNCTION_BLOCK FB_BACnet_MyLocalObjectEvents EXTENDS FB_BA_LocalObjectEventSubscriber]]></Declaration>
    <Implementation>
      <ST><![CDATA[]]></ST>
    </Implementation>
    <Folder Name="Events" Id="{7adf3162-642d-4e26-91be-2545239b97c2}" />
    <Method Name="OnBACnetObjectStateChanged" Id="{8a769428-0d81-45ec-9ab3-c52bda2e1998}" FolderPath="Events\">
      <Declaration><![CDATA[METHOD PROTECTED OnBACnetObjectStateChanged
VAR_INPUT
	iObject			: I_BA_Object;
	fbBACnetObject	: POINTER TO FB_BACnet_BaseObject;
	tState			: TCOM_STATE;
END_VAR]]></Declaration>
      <Implementation>
        <ST><![CDATA[CASE (tState) OF
	TCOM_STATE.TCOM_STATE_PREOP:
		// Sample 1) Enable specific properties.
		CASE (fbBACnetObject^.ObjectType) OF
			E_BACnetObjType.ObjAnalogInput:
				// Sample 1.1) Enable 'PT1 damp factor' for all analog inputs:
				fbBACnetObject^.EnableProperty(E_BACnetPropIdentifier.PropPt1DampFactor, TRUE);
			
		END_CASE
		
		// Sample 2) Writeprotect specific properties.
		CASE (fbBACnetObject^.ObjectType) OF
			E_BACnetObjType.ObjSchedule:
				// Sample 2.1) Writeprotect 'schedule default' for all schedulers:
				fbBACnetObject^.WriteProtectProperty(E_BACnetPropIdentifier.PropScheduleDefault, TRUE);
			
		END_CASE
		
END_CASE]]></ST>
      </Implementation>
    </Method>
    <Method Name="OnInitStateChange" Id="{4bf4d11a-d48a-4966-a447-9fb40b6e7e63}" FolderPath="Events\">
      <Declaration><![CDATA[METHOD PROTECTED OnInitStateChange
VAR_INPUT
	iObject			: I_BA_Object;
	eState			: E_BA_InitState;
END_VAR
VAR
	
	_fbBACnetObj	: POINTER TO FB_BACnet_BaseObject;
END_VAR]]></Declaration>
      <Implementation>
        <ST><![CDATA[// Sample 1) Evaluate object state.
CASE (eState) OF
	E_BA_InitState.ePostInitSupplement:
		// Object has finished to initialize enabled supplement(s).
	
		// Sample 1.1) Initialize some properties:
		IF (iObject.IsReused) THEN
			; // Skip (Do not overwrite previously restored persisted values here).
		ELSIF (iObject.GetBACnetObject(fbObject=>_fbBACnetObj)) THEN
			CASE (_fbBACnetObj^.ObjectType) OF
				E_BACnetObjType.ObjAnalogInput:
					// Write 'PT1 damp factor' for all analog inputs:
					_fbBACnetObj^.WritePropertyReal(E_BACnetPropIdentifier.PropPt1DampFactor, 0.5);
				
			END_CASE
		END_IF

END_CASE
]]></ST>
      </Implementation>
    </Method>
  </POU>
</TcPlcObject>